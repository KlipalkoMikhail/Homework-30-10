#include "headers.h"

// 112 Клипалко Михаил Михайлович

int bit_mirror(char * ps)                   // из битового представления получаем зеркально отображенное число в десятичной системе
{
    int size = 8*sizeof(int);               // размер в 32 бита
    int n = 0;                              // отображаемое число
    int sup = 0;                            // целое число 0, в ячейки бит который мы будем записывать биты из массива

    for (int i = size - 1; i >= 1; i--)     // цикл для записи в sup значение бит
    {
        sup = sup | (ps[i] - '0');          // сводим число ps - 0 к int и сравниваем биты с числом sup
        sup = sup << (size - 1 - i);        // сдвигаем наш бит в нужную ячейку
        n = n | sup;                        // и теперь записываем его в нужное место в числе n
        sup = 0;                            // обнуляем sup
    }

    if (ps[0] == '1') n = -n;               // случай отрицательного числа, последний бит используем как знак
    else                                    // если последний бит = 0, то вписываем его в первую ячейку числа
    {
        sup = sup | (ps[0] - '0');          // все аналогично предыдущим шагам
        sup = sup << (size - 1);
        n = n | sup;
        sup = 0;
    }

    return n;                               // возвращаем отзеркаленное число
}
