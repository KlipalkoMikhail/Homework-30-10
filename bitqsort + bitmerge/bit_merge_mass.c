#include "headers.h"

// 112 Клипалко Михаил Михайлович

// функция слияния двух упорядоченных массивов
// получаем в качестве параметров массив чисел, значение левого указателя
// значение центрального указателя, значение правого указателя, параметр текущей длины массива
// наша функция ничего не возращает

void bit_merge_mass(int C[], int l, int m, int r, int k)            // функция слияния двух массивов
{
    int i;                                                          // индекс i для первого массива
    int j;                                                          // индекс j для первого массива
    int array1 = m - l + 1;                                         // вычисляем длину первой половины массива
    int array2 = r - m;                                             // вычисляем длину второй половины массива

    int A[array1];                                                  // объявляем массив из первой половины чисел
    int B[array2];                                                  // объявляем массив из второй половины чисел

    for (i = 0; i < array1; i++)                                    // цикл для записи чисел в первый массив
    {
        A[i] = C[l + i];                                            // считывать будем с помощью левого указателя, двигая индекс числа C вправо
    }



    for (i = 0; i < array2; i++)                                    // цикл для записи чисел во второй массив
    {
        B[i] = C[m + 1 + i];                                        // считывать будем с помощью центрального указателя, двигая индекс числа C вправо
    }


    i = j = 0;                                                      // обнуляем индексы i и j, чтобы использовать их в цикле слияния

    for(int s = l; s <= r; s++)                                     // цикл слияния двух массивов начинаем с левого указателя
    {
        if (i >= array1)                                            // если в первом массиве закончились числа, то считываем все числа из второго
        {
            C[s] = B[j];
            j++;
        }
        else if (j >= array2)                                       // если во втором массиве закончились числа, то считываем все числа из первого
        {
            C[s] = A[i];
            i++;
        }
        else if (count_bit(A[i]) <= count_bit(B[j]))                // берем число из первого массива и сравниваем со вторым
        {
            C[s] = A[i];
            i++;
        }
        else                                                        // исходя из сравнения, записываем меньшее число в исходный массив
        {
            C[s] = B[j];
            j++;
        }
    }
}
